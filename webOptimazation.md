## 웹 최적화는 무엇일까?

웹 최적화는 웹사이트의 성능을 최대화하고 사용자 경험을 개선하기 위한 프로세스로, 검색 엔진 최적화(SEO), 웹사이트의 속도, 안정성, 접근성, 모바일 호환성, 그리고 사용자 친화성과 같은 다양한 요소들을 포함한다.
보다 나은 SEO를 통해 웹사이트의 노출을 증가시키고, 웹 사이트 로딩 속도 개선 등을 통해 좋은 사용자 경험을 만들기 때문에 웹 최적화가 필요하다.

---

## 이를 위해 어떤 개발을 해야 할까?

1. 렌더링 최적화
   <img src="https://velog.velcdn.com/images%2Fhsecode%2Fpost%2F4d481a61-d2ab-407a-bae1-e4321d6ca7b9%2Fimage.png">

   - 브라우저에서는 다음과 같이 스타일이 그려지게 되는데 레이아웃의 넓이, 높이, 위치 등에 영향을 주는 css 속성을 변경할 경우 'Layout'부터 다시 그려지게 되며 이를 리플로우라고 한다.
     리플로우가 일어나면 브라우저가 렌더링에 필요한 속성을 모두 다시 계산해야하기 때문에 렌더링에 시간이 소요된다. 따라서 리플로우를 발생시키는 속성을 지양하고 레이아웃에 영향을 주지 않는 속성을 사용하여 'Paint'부터 진행하는 리페인트를 사용하면 좋다.

   [CSS]

   - DOM은 CSSOM이 있어야 렌더 트리를 만들고, 그것을 렌더링할 수 있기 때문에 css는 항상 html 최상단 head 태그에 위치하도록 한다.
   - CSS는 렌더링 차단 리소스기 때문에 불필요한 CSS는 모두 제거하는 것이 좋다. 불필요한 CSS는 lighthouse를 이용하면 손쉽게 찾을 수 있다.
   - CSS 사용시 복잡하게 셀렉터를 사용하게 되면 레이아웃을 그리는데 시간이 오래 걸려 렌더링에 오랜 시간이 소요되기 때문에 최대한 간결하게 스타일을 작성한다.

   [HTML]

   - 불필요하게 감싸는 div 태그가 많아질수록 DOM 트리가 복잡해져 렌더링에 시간이 소요되기 때문에 DOM 트리를 최대한 간단하게 설계해야한다.

</br>

2. 로딩 최적화

   - media 속성을 사용하면 조건별로 css를 불러와 렌더링 시간이 감소된다.
   - css는 head, js는 body 하단에서 불러온다 : 웹 페이지는 로드됨과 동시에 html,css를 파싱하고, 이것들은 시각적 부분을 담당하기에 빠르게 그려질수록 좋다. 따라서 css는 head에 위치시킨다. 또한 파싱을 실행하면서 script를 만나면 html 파싱을 멈추고 해당 파일을 다운로드한 뒤 실행하기 때문에 js를 제외한 구조들의 로드가 끝나고 js가 들어오는 것이 좋다. 이를 위해 body 태그를 닫기 직전에 script를 임포트 하여 js를 불러오는 것이 좋다.
   - async / defer : 이 두 속성을 이용하면 로딩 시에도 스크립트 파일을 병렬적으로 불러온다. aysnc는 병렬적으로 다운로드함과 동시에 실행하고, defer는 병렬적으로 다운로드를 하고, DOM이 들어오면 실행을 한다.

   ```js
   <script async src="test.js"></script>
   <script defer src="test.js"></script>
   ```

</br>

3. 기타
   - Lighthouse와 같은 성능 측정 도구를 이용해 성능 개선을 진행한다. (SEO까지 함께 개선할 수 있어서 프로덕트 릴리즈 전에 무조건 사용해봐야한다고 생각한다.)
   - 검색 엔진 최적화(SEO) 최적화를 위해 시맨틱 태그를 적극 활용하고, 메타 데이터와 태그를 포함하는 작업을 거친다.
   - 웹팩(Webpack)을 사용해서 css와 js 하나의 파일들로 묶어서 리소스 요청을 줄일 수 있다.
   - 이미지 지연로딩 사용하기 : lazy를 사용하면 화면 상에 보이는 부분만 먼저 출력하고 화면 바깥쪽 이미지들은 로딩하지 않고, 사용자가 화면을 위로 올리면 아래쪽에 있던 이미지가 올라오면서 로딩된다.
   ```js
   <img src="item.jpg" loading="lazy" alt>
   ```

---

## 최적화를 위한 개발을 꼭 해야 할까?

프론트엔드 개발자로서 최적화를 위한 개발은 무조건 필요하다고 생각한다.

약 3개월 째 pic.me라는 서비스를 개발해오고 있는데, 이미지 크기로 인한 성능 저하, 청크 파일이 너무 무거움으로 인해 발생하는 로딩 속도 저하 등 다양한 성능 저하 요인을 겪어왔다. 이를 통해 성능 저하는 어떠한 한 요소로만 야기되는 것이 아니라 다양한 복합적인 요인으로 발생하고, 그렇기에 처음부터 최적화를 어느 정도 알고 이를 고려하며 개발을 한다면 훨씬 개발 리소스를 잘 사용할 수 있다는 깨달음을 얻었다.
최근 많은 서비스에서 CSR이 아니라 SSR을 사용하는 추세도 이를 반영한 것이라고 생각한다.

개인적으로 개발 첫 프로젝트를 하면서 최적화를 고려하지 못하고 어떠한 기능을 구현할 수 있느냐 없느냐에만 너무 집중했던 것이 아쉬웠고, 결국 추후 최적화에 골머리를 앓아야했는데 앞으로 조금이라도 최적화를 고려하면서 개발을 진행하며 이러한 아쉬움을 해소하고 싶다.

---

참고 자료

[[최적화] 웹 성능 최적화 방법 5분 완성](https://velog.io/@hsecode/최적화-웹-성능-최적화-방법-5분-완성)
[웹 표준 및 성능 최적화의 방법과 필요성](https://velog.io/@dmchoi224/%EC%9B%B9-%ED%91%9C%EC%A4%80-%EB%B0%8F-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94%EC%9D%98-%EB%B0%A9%EB%B2%95%EA%B3%BC-%ED%95%84%EC%9A%94%EC%84%B1)
[프론트앤드 웹 성능 최적화 가이드 - 성능 지표, 데이터 로드 최적화](https://www.stevy.dev/frontend-web-performance-guide-1/)
